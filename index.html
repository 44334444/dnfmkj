<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="description" content="Blocawa RGB-–ò–í–ï–ù–¢ ‚Äî —Å–µ–Ω—Å–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ –≤ —Å—Ç–∏–ª–µ Block Blast —Å —Ä–∞–¥—É–∂–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π –∏ –ø–∞—Å—Ö–∞–ª–∫–æ–π." />
<meta name="theme-color" content="#071021" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23071021'/><text x='50' y='70' font-size='80' text-anchor='middle' fill='%23fff'>üß©</text></svg>">
<title>Blocawa (RGB-–ò–í–ï–ù–¢)</title>
<style>
:root{
  --cell-size:36px;--gap:4px;--board-bg:#071021;--cell-bg:#0b1220;--cell-border:rgba(255,255,255,0.03);
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;margin:0;font-family:Inter,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#031220,#07182a);color:#e6eef6;-webkit-user-select:none;user-select:none;}
.wrap{display:flex;flex-direction:column;align-items:center;gap:14px;padding:14px;max-width:720px;margin:0 auto;}
h1{font-size:16px;font-weight:600;margin:8px 0 0;color:#cfeefe;text-shadow:0 2px 10px rgba(0,0,0,.6);}
.board-shell{background:rgba(255,255,255,.02);padding:14px;border-radius:14px;box-shadow:0 10px 40px rgba(2,6,23,.75);width:100%;}
.board{display:grid;grid-template-columns:repeat(10,var(--cell-size));grid-template-rows:repeat(10,var(--cell-size));gap:var(--gap);touch-action:none;justify-content:center;}
.cell{width:var(--cell-size);height:var(--cell-size);background:var(--cell-bg);border-radius:8px;border:1px solid var(--cell-border);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;transform-origin:center;}
.cell.occupied{animation:rainbowShift 4s linear infinite,popIn .22s cubic-bezier(.2,.9,.2,1);background:linear-gradient(90deg,rgba(255,0,110,.25),rgba(0,200,255,.25));border:1px solid rgba(255,255,255,.06);box-shadow:inset 0 -6px 18px rgba(0,0,0,.45),0 6px 16px rgba(0,0,0,.5);}
.cell.occupied::after{content:'';position:absolute;inset:0;z-index:0;background:conic-gradient(from 90deg,#ff0055,#ff9900,#ffee33,#22ddcc,#4488ff,#ff00aa);opacity:.25;transform:scale(1.06);filter:blur(5px) brightness(1.3);animation:rotateHue 6s linear infinite;mix-blend-mode:overlay;}
.cell .pulse{z-index:1;width:78%;height:78%;border-radius:6px;background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));transform:scale(.98);}
.cell.highlight-okay{outline:3px solid rgba(16,185,129,.25);box-shadow:0 0 18px rgba(16,185,129,.1) inset;border-radius:8px;}
.cell.highlight-bad{outline:3px solid rgba(239,68,68,.25);box-shadow:0 0 18px rgba(239,68,68,.1) inset;border-radius:8px;}
.palette{display:flex;gap:12px;margin-top:12px;justify-content:center;flex-wrap:wrap;}
.piece{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(0,0,0,.03));padding:8px;border-radius:12px;min-width:124px;display:flex;gap:10px;align-items:center;justify-content:center;touch-action:none;border:1px solid rgba(255,255,255,.03);transition:transform .16s ease,box-shadow .16s ease;}
.piece.picked{transform:translateY(-6px) scale(1.03);box-shadow:0 14px 40px rgba(2,6,23,.7);}
.mini-grid{display:grid;gap:4px;}
.mini-cell{width:14px;height:14px;border-radius:3px;background:rgba(255,255,255,.05);box-shadow:inset 0 -2px 6px rgba(0,0,0,.45);}
.mini-cell.filled{background:linear-gradient(180deg,#ff7aa2,#8affd1);box-shadow:0 4px 10px rgba(2,6,8,.6);}
.ghost{position:fixed;pointer-events:none;z-index:9999;transform:translate(-50%,-50%);opacity:.95;filter:drop-shadow(0 12px 30px rgba(2,6,23,.6));border-radius:10px;transition:transform .08s linear;}
.controls{display:flex;gap:8px;margin-top:8px;align-items:center;justify-content:center;flex-wrap:wrap;}
button{padding:8px 10px;border-radius:8px;border:0;background:#0b1220;color:#dff7f0;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(2,6,23,.6);}
.score{margin-left:8px;color:#9ee7d6;font-weight:800;font-size:15px;}
.cell.clearing{animation:clearFade .42s cubic-bezier(.2,.9,.2,1) forwards;}
.easter{position:fixed;left:50%;bottom:-160px;transform:translateX(-50%);background:linear-gradient(180deg,#0a1318,#07101a);padding:18px 26px;border-radius:18px;z-index:2000;border:1px solid rgba(255,255,255,.06);box-shadow:0 20px 60px rgba(2,6,23,.75);display:flex;gap:10px;align-items:center;color:#fff;font-weight:800;letter-spacing:.6px;opacity:0;}
.easter.show{animation:slideUp 1s cubic-bezier(.2,.9,.2,1) forwards;}
.easter .label{font-size:20px;color:#ffd36b;text-shadow:0 4px 30px rgba(255,211,107,.1);}
.easter .sub{font-size:14px;color:#bfe9d7;}
@keyframes rainbowShift{0%{filter:hue-rotate(0deg);}100%{filter:hue-rotate(360deg);}}
@keyframes rotateHue{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
@keyframes popIn{0%{transform:scale(.6);opacity:0}70%{transform:scale(1.05);}100%{transform:scale(1);opacity:1}}
@keyframes clearFade{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.6)}}
@keyframes slideUp{0%{transform:translateX(-50%) translateY(80px);opacity:0;}60%{transform:translateX(-50%) translateY(-8px);opacity:1;}100%{transform:translateX(-50%) translateY(0);}}
@media(max-width:420px){:root{--cell-size:30px;--gap:3px}.mini-cell{width:12px;height:12px}.easter{padding:14px 18px}.easter .label{font-size:18px}}
</style>
</head>
<body>
<noscript><div style="text-align:center;padding:2em;font-size:18px;color:#fff;">‚ö†Ô∏è –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã –≤–∫–ª—é—á–∏—Ç–µ JavaScript.</div></noscript>

<div class="wrap">
  <h1>Blocawa ‚Äî RGB-–ò–í–ï–ù–¢</h1>
  <div class="board-shell" id="boardShell">
    <div id="board" class="board"></div>
    <div class="palette" id="palette"></div>
    <div class="controls">
      <button id="newPiecesBtn">—Ä–µ—Å—Ç–∞—Ä—Ç –±–ª–æ–∫–æ–≤</button>
      <div class="score">–û—á–∫–∏: <span id="score">0</span></div>
    </div>
  </div>
</div>
<div id="easter" class="easter" aria-hidden="true">
  <div class="label">—É–¥–æ–±–Ω–∞—è –ø–æ–∑–∞</div>
  <div class="sub">‚Äî –∏—Ä–∞ –ø–∞—Å—Ö–∞–ª–∫–æ ‚Äî</div>
</div>

<script>
/* —Ç–æ—Ç –∂–µ JS, –ª–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–≤–æ–∏–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º ghvcfd.html */
const COLS=10,ROWS=10;const b=document.getElementById("board"),p=document.getElementById("palette"),s=document.getElementById("score"),btn=document.getElementById("newPiecesBtn"),egg=document.getElementById("easter");let board=Array.from({length:ROWS},()=>Array(COLS).fill(0)),score=0;
const SHAPES=[[[0,0]],[[0,0],[1,0]],[[0,0],[1,0],[2,0]],[[0,0],[0,1],[1,0]],[[0,0],[1,0],[0,1],[1,1]],[[0,0],[1,0],[2,0],[3,0]],[[0,0],[1,0],[2,0],[1,1]],[[1,0],[0,1],[1,1],[2,1],[1,2]],[[0,0],[1,0],[2,0],[2,1]],[[0,0],[0,1],[0,2],[1,2]],[[0,1],[1,1],[2,1],[1,0]],[[0,0],[1,0],[1,1]],[[0,0],[1,0],[2,0],[0,1]]];
function renderBoard(){b.innerHTML='';for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++){const cell=document.createElement('div');cell.className='cell';cell.dataset.r=r;cell.dataset.c=c;if(board[r][c]){cell.classList.add('occupied');cell.appendChild(Object.assign(document.createElement('div'),{className:'pulse'}));}b.appendChild(cell);}}
renderBoard();
function randomPiece(){const shape=SHAPES[Math.floor(Math.random()*SHAPES.length)];const minx=Math.min(...shape.map(p=>p[0])),miny=Math.min(...shape.map(p=>p[1]));const coords=shape.map(p=>[p[0]-minx,p[1]-miny]);return{coords,id:Math.random().toString(36).slice(2,8)};}
let palette=[];function refillPalette(){palette=[randomPiece(),randomPiece(),randomPiece()];renderPalette();}
function renderPalette(){p.innerHTML='';for(const q of palette){const pe=document.createElement('div');pe.className='piece';const mx=Math.max(...q.coords.map(c=>c[0])),my=Math.max(...q.coords.map(c=>c[1]));const m=document.createElement('div');m.className='mini-grid';m.style.gridTemplateColumns=`repeat(${mx+1},14px)`;for(let y=0;y<=my;y++)for(let x=0;x<=mx;x++){const mc=document.createElement('div');const f=q.coords.some(pt=>pt[0]===x&&pt[1]===y);mc.className='mini-cell'+(f?' filled':'');if(f)mc.style.background='linear-gradient(180deg,#ff9acc,#9fffe5)';m.appendChild(mc);}pe.appendChild(m);p.appendChild(pe);attachPiecePointerHandlers(pe,q);} }
refillPalette();
let current=null,ghost=null;
function makeGhost(piece){const g=document.createElement('div');g.className='ghost';const mx=Math.max(...piece.coords.map(p=>p[0])),my=Math.max(...piece.coords.map(p=>p[1]));g.style.display='grid';g.style.gridTemplateColumns=`repeat(${mx+1},${Math.round(parseInt(getComputedStyle(document.documentElement).getPropertyValue('--cell-size'))*.9)}px)`;for(let y=0;y<=my;y++)for(let x=0;x<=mx;x++){const box=document.createElement('div');box.style.borderRadius='6px';box.style.boxShadow='inset 0 -3px 8px rgba(0,0,0,.6)';if(piece.coords.some(pt=>pt[0]===x&&pt[1]===y))box.style.background='linear-gradient(180deg,#ff9ad1,#7df0c2)';g.appendChild(box);}document.body.appendChild(g);return g;}
function attachPiecePointerHandlers(el,piece){el.addEventListener('pointerdown',e=>{e.preventDefault();el.setPointerCapture(e.pointerId);current={piece,pointerId:e.pointerId,origin:el,startX:e.clientX,startY:e.clientY,moved:false};el.classList.add('picked');ghost=makeGhost(piece);moveGhost(e.clientX,e.clientY);window.addEventListener('pointermove',move);window.addEventListener('pointerup',up);});}
function move(e){if(!current||e.pointerId!==current.pointerId)return;const dx=e.clientX-current.startX,dy=e.clientY-current.startY;if(!current.moved&&(Math.abs(dx)>6||Math.abs(dy)>6))current.moved=true;moveGhost(e.clientX,e.clientY);const r=b.getBoundingClientRect();const cw=r.width/COLS,ch=r.height/ROWS;const bc=Math.floor((e.clientX-r.left)/cw),br=Math.floor((e.clientY-r.top)/ch);clearHighlights();if(bc>=0&&bc<COLS&&br>=0&&br<ROWS){const ok=checkPlace(current.piece.coords,br,bc);highlight(current.piece.coords,br,bc,ok);} }
function up(e){if(!current||e.pointerId!==current.pointerId)return;const r=b.getBoundingClientRect(),cw=r.width/COLS,ch=r.height/ROWS;const bc=Math.floor((e.clientX-r.left)/cw),br=Math.floor((e.clientY-r.top)/ch);if(current.moved&&bc>=0&&bc<COLS&&br>=0&&br<ROWS)place(current.piece,br,bc);else tapMode(current.piece,current.origin);clean();}
function clean(){if(current&&current.origin)current.origin.classList.remove('picked');if(ghost){ghost.remove();ghost=null;}current=null;window.removeEventListener('pointermove',move);window.removeEventListener('pointerup',up);clearHighlights();}
function moveGhost(x,y){if(ghost){ghost.style.left=x+'px';ghost.style.top=y+'px';}}
function checkPlace(cds,r,c){for(const [x,y]of cds){const rr=r+y,cc=c+x;if(rr<0||rr>=ROWS||cc<0||cc>=COLS)return false;if(board[rr][cc])return false;}return true;}
function highlight(cds,r,c,ok){cds.forEach(([x,y])=>{const rr=r+y,cc=c+x;if(rr<0||rr>=ROWS||cc<0||cc>=COLS)return;const idx=rr*COLS+cc,cell=b.children[idx];if(cell)cell.classList.add(ok?'highlight-okay':'highlight-bad');});}
function clearHighlights(){b.querySelectorAll('.highlight-okay,.highlight-bad').forEach(el=>el.classList.remove('highlight-okay','highlight-bad'));}
function place(piece,r,c){if(!checkPlace(piece.coords,r,c)){if(navigator.vibrate)navigator.vibrate(30);b.style.transform='translateY(-6px)';setTimeout(()=>b.style.transform='',80);return;}
piece.coords.forEach(([x,y])=>board[r+y][c+x]=1);renderBoard();palette=palette.filter(p=>p.id!==piece.id);if(palette.length===0)refillPalette();renderPalette();score+=piece.coords.length*10;s.textContent=score;if(score===69000)eggShow();const cleared=clearLines();if(cleared){score+=cleared*50;s.textContent=score;if(score===69000)eggShow();}}
let tap=null;function tapMode(piece,el){tap={piece,el};el.classList.add('picked');const h=e=>{if(!e.target.classList.contains('cell'))return;const r=+e.target.dataset.r,c=+e.target.dataset.c;place(piece,r,c);el.classList.remove('picked');tap=null;b.removeEventListener('pointerdown',h);};b.addEventListener('pointerdown',h);}
function clearLines(){const rows=[],cols=[];for(let r=0;r<ROWS;r++)if(board[r].every(v=>v===1))rows.push(r);for(let c=0;c<COLS;c++){let ok=true;for(let r=0;r<ROWS;r++)if(board[r][c]===0){ok=false;break;}if(ok)cols.push(c);}if(!rows.length&&!cols.length)return 0;const to=[];rows.forEach(r=>{for(let c=0;c<COLS;c++)to.push([r,c]);});cols.for
